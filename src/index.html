<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/style.css">
  <title>Social Food's</title>
</head>

<body>
  <header>
    <img class="logo" src="img/logo.png">
  </header>
  <nav>
    <ul></ul>
    <ul></ul>
  </nav>
  <h1>BIENVENIDOS</h1>
  <section class="login">
    <input type="email" id="email" placeholder="Ingresa tu correo" />
    <input type="password" id="password" placeholder="Contraseña" />
    <button onclick="enter()">Ingresar</button>
    <button onclick="check()">Regístrate</button>
    <img src="img/google-logo.png" class="google">
    <h1 id="login"></h1>
  </section>

  <script type="module" src="main.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.0/firebase-auth.js"></script>

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyC0b8XiZ4ieUUXvw5ou_i4D0Jsy9ANGTr4",
      authDomain: "social-food-s.firebaseapp.com",
      projectId: "social-food-s",
      storageBucket: "social-food-s.appspot.com",
      messagingSenderId: "894328932250",
      appId: "1:894328932250:web:0975a8bfda4bf20ab71c23"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    firebase.auth().onAuthStateChanged((user) => {
      if (user) {
        // User is signed in, see docs for a list of available properties
        // https://firebase.google.com/docs/reference/js/firebase.User
        var uid = user.uid;
        document.getElementById("login").innerHTML = "Sesión iniciada correctamente " + user.email;
      } else {
        document.getElementById("login").innerHTML = "Los datos ingresados no son válidos ";
        // User is signed out
        // ...
      }
    });

    const enter = () => {
      let email = document.getElementById("email").value;
      let password = document.getElementById("password").value;
      //alert("email="+email+"password="+password);//
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          // Signed in
          var user = userCredential.user;
          // ...
        })
        .catch((error) => {
          var errorCode = error.code;
          var errorMessage = error.message;
          alert(errorMessage);
        });

      /*Registro de usuarios nuevos*/
      const enter = () => {
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
        //alert("email="+email+"password="+password);//

        firebase.auth().createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            // Signed in
            var user = userCredential.user;
            // ...
          })
          .catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            //alert(errorMessage);//
            console.log(errorCode);
            console.log(errorMessage);
          });
      }
    };
  </script>
</body>

</html>